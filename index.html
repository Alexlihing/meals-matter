<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Matters</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #4CAF50;
            padding: 20px;
            text-align: center;
            color: white;
        }
        nav {
            display: flex;
            justify-content: space-around;
            background-color: #333;
        }
        nav a {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            text-align: center;
        }
        nav a:hover {
            background-color: #ddd;
            color: black;
        }
        section {
            padding: 20px;
        }
        #map {
            height: 400px;
            width: 100%;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap" async defer></script>
</head>
<body>

    <!-- Header -->
    <header>
        <h1>Meal Matters</h1>
        <p>Connecting food providers with shelters and individuals in need</p>
    </header>

    <!-- Navigation -->
    <nav>
        <a href="#home">Home</a>
        <a href="#about">About/Purpose</a>
        <a href="#map-section">Map</a>
        <a href="#account">Create Account/Login</a>
    </nav>

    <!-- About/Purpose Section -->
    <section id="about">
        <h2>About</h2>
        <p>This website helps reduce food waste by connecting local bakeries, grocery stores, and restaurants with shelters and individuals that need food assistance. Our goal is to minimize food waste and ensure that the food is distributed to those in need in our community.</p>
    </section>

    <!-- Google Maps Section -->
    <section id="map-section">
        <h2>Find Food Providers Nearby</h2>
        <div id="map"></div>
    </section>

    <!-- Create Account/Login Section -->
    <section id="account">
        <h2>Create Account or Login</h2>
        <form id="accountForm">
            <label for="email">Email:</label><br>
            <input type="email" id="email" required><br><br>
            
            <label for="password">Password:</label><br>
            <input type="password" id="password" required><br><br>
            
            <button type="button" onclick="signUp()">Sign Up</button>
            <button type="button" onclick="login()">Login</button>
        </form>
        <div id="accountStatus"></div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Food Waste Reduction Website</p>
    </footer>

    <script>
        // Initialize Firebase (Use your Firebase credentials)
        const firebaseConfig = {
            apiKey: "YOUR_FIREBASE_API_KEY",
            authDomain: "your-project-id.firebaseapp.com",
            projectId: "your-project-id",
            storageBucket: "your-project-id.appspot.com",
            messagingSenderId: "your-messaging-sender-id",
            appId: "your-app-id"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Google Maps Initialization
        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 37.7749, lng: -122.4194 }, // Default center (San Francisco)
                zoom: 12
            });
            
            // Example markers (You can retrieve these from your database)
            const markers = [
                { lat: 37.7749, lng: -122.4194, label: 'Food Provider 1' },
                { lat: 37.7849, lng: -122.4294, label: 'Shelter 1' },
            ];
            
            markers.forEach(location => {
                new google.maps.Marker({
                    position: { lat: location.lat, lng: location.lng },
                    map: map,
                    title: location.label
                });
            });
        }

        // Firebase Authentication (Sign Up and Login)
        function signUp() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    document.getElementById('accountStatus').innerText = 'Account created successfully!';
                    const user = userCredential.user;
                    db.collection('users').doc(user.uid).set({
                        email: user.email,
                        userType: 'recipient', // Set this based on the type of user
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .catch(error => {
                    document.getElementById('accountStatus').innerText = 'Error: ' + error.message;
                });
        }

        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            auth.signInWithEmailAndPassword(email, password)
                .then(userCredential => {
                    document.getElementById('accountStatus').innerText = 'Logged in successfully!';
                })
                .catch(error => {
                    document.getElementById('accountStatus').innerText = 'Error: ' + error.message;
                });
        }
    </script>
</body>
</html>
